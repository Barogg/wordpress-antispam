{"version":3,"file":"cleantalk-modal.min.js","sources":["cleantalk-modal.js"],"sourcesContent":["/* Cleantalk Modal object */\r\ncleantalkModal = {\r\n\r\n    // Flags\r\n    loaded: false,\r\n    loading: false,\r\n    opened: false,\r\n    opening: false,\r\n\r\n    // Methods\r\n    load: function( action ) {\r\n        if( ! this.loaded ) {\r\n            this.loading = true;\r\n            callback = function( result, data, params, obj ) {\r\n                cleantalkModal.loading = false;\r\n                cleantalkModal.loaded = result;\r\n                document.dispatchEvent(\r\n                    new CustomEvent( \"cleantalkModalContentLoaded\", {\r\n                        bubbles: true,\r\n                    } )\r\n                );\r\n            };\r\n            if( typeof apbct_admin_sendAJAX === \"function\" ) {\r\n                apbct_admin_sendAJAX( { 'action' : action }, { 'callback': callback, 'notJson': true } );\r\n            } else {\r\n                apbct_public_sendAJAX( { 'action' : action }, { 'callback': callback, 'notJson': true } );\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    open: function () {\r\n        /* Cleantalk Modal CSS start */\r\n        var renderCss = function () {\r\n            var cssStr = '';\r\n            for ( key in this.styles ) {\r\n                cssStr += key + ':' + this.styles[key] + ';';\r\n            }\r\n            return cssStr;\r\n        };\r\n        var overlayCss = {\r\n            styles: {\r\n                \"z-index\": \"9999\",\r\n                \"position\": \"fixed\",\r\n                \"top\": \"0\",\r\n                \"left\": \"0\",\r\n                \"width\": \"100%\",\r\n                \"height\": \"100%\",\r\n                \"background\": \"rgba(0,0,0,0.5)\",\r\n                \"display\": \"flex\",\r\n                \"justify-content\" : \"center\",\r\n                \"align-items\" : \"center\",\r\n            },\r\n            toString: renderCss\r\n        };\r\n        var innerCss = {\r\n            styles: {\r\n                \"position\" : \"relative\",\r\n                \"padding\" : \"30px\",\r\n                \"background\" : \"#FFF\",\r\n                \"border\" : \"1px solid rgba(0,0,0,0.75)\",\r\n                \"border-radius\" : \"4px\",\r\n                \"box-shadow\" : \"7px 7px 5px 0px rgba(50,50,50,0.75)\",\r\n            },\r\n            toString: renderCss\r\n        };\r\n        var closeCss = {\r\n            styles: {\r\n                \"position\" : \"absolute\",\r\n                \"background\" : \"#FFF\",\r\n                \"width\" : \"20px\",\r\n                \"height\" : \"20px\",\r\n                \"border\" : \"2px solid rgba(0,0,0,0.75)\",\r\n                \"border-radius\" : \"15px\",\r\n                \"cursor\" : \"pointer\",\r\n                \"top\" : \"-8px\",\r\n                \"right\" : \"-8px\",\r\n            },\r\n            toString: renderCss\r\n        };\r\n        var closeCssBefore = {\r\n            styles: {\r\n                \"content\" : \"\\\"\\\"\",\r\n                \"display\" : \"block\",\r\n                \"position\" : \"absolute\",\r\n                \"background\" : \"#000\",\r\n                \"border-radius\" : \"1px\",\r\n                \"width\" : \"2px\",\r\n                \"height\" : \"16px\",\r\n                \"top\" : \"2px\",\r\n                \"left\" : \"9px\",\r\n                \"transform\" : \"rotate(45deg)\",\r\n            },\r\n            toString: renderCss\r\n        };\r\n        var closeCssAfter = {\r\n            styles: {\r\n                \"content\" : \"\\\"\\\"\",\r\n                \"display\" : \"block\",\r\n                \"position\" : \"absolute\",\r\n                \"background\" : \"#000\",\r\n                \"border-radius\" : \"1px\",\r\n                \"width\" : \"2px\",\r\n                \"height\" : \"16px\",\r\n                \"top\" : \"2px\",\r\n                \"left\" : \"9px\",\r\n                \"transform\" : \"rotate(-45deg)\",\r\n            },\r\n            toString: renderCss\r\n        };\r\n        var bodyCss = {\r\n            styles: {\r\n                \"overflow\" : \"hidden\",\r\n            },\r\n            toString: renderCss\r\n        };\r\n        var cleantalkModalStyle = document.createElement( 'style' );\r\n        cleantalkModalStyle.setAttribute( 'id', 'cleantalk-modal-styles' );\r\n        cleantalkModalStyle.innerHTML = 'body.cleantalk-modal-opened{' + bodyCss + '}';\r\n        cleantalkModalStyle.innerHTML = 'body.cleantalk-modal-opened .tvd-toast.tve-fe-message{display:none!important}'; // fix for ThriveLeads plugin\r\n        cleantalkModalStyle.innerHTML += '#cleantalk-modal-overlay{' + overlayCss + '}';\r\n        cleantalkModalStyle.innerHTML += '#cleantalk-modal-close{' + closeCss + '}';\r\n        cleantalkModalStyle.innerHTML += '#cleantalk-modal-close:before{' + closeCssBefore + '}';\r\n        cleantalkModalStyle.innerHTML += '#cleantalk-modal-close:after{' + closeCssAfter + '}';\r\n        document.body.append( cleantalkModalStyle );\r\n        /* Cleantalk Modal CSS end */\r\n\r\n        var overlay = document.createElement( 'div' );\r\n        overlay.setAttribute( 'id', 'cleantalk-modal-overlay' );\r\n        document.body.append( overlay );\r\n\r\n        document.body.classList.add( 'cleantalk-modal-opened' );\r\n\r\n        var inner = document.createElement( 'div' );\r\n        inner.setAttribute( 'id', 'cleantalk-modal-inner' );\r\n        inner.setAttribute( 'style', innerCss );\r\n        overlay.append( inner );\r\n\r\n        var close = document.createElement( 'div' );\r\n        close.setAttribute( 'id', 'cleantalk-modal-close' );\r\n        inner.append( close );\r\n\r\n        var content = document.createElement( 'div' );\r\n        if ( this.loaded ) {\r\n            content.innerHTML = this.loaded;\r\n        } else {\r\n            content.innerHTML = 'Loading...';\r\n            // @ToDo Here is hardcoded parameter. Have to get this from a 'data-' attribute.\r\n            this.load( 'get_options_template' );\r\n        }\r\n        content.setAttribute( 'id', 'cleantalk-modal-content' );\r\n        inner.append( content );\r\n\r\n        this.opened = true;\r\n    },\r\n\r\n    close: function () {\r\n        document.body.classList.remove( 'cleantalk-modal-opened' );\r\n        document.getElementById( 'cleantalk-modal-overlay' ).remove();\r\n        document.getElementById( 'cleantalk-modal-styles' ).remove();\r\n        document.dispatchEvent(\r\n            new CustomEvent( \"cleantalkModalClosed\", {\r\n                bubbles: true,\r\n            } )\r\n        );\r\n    }\r\n\r\n};\r\n\r\n/* Cleantalk Modal helpers */\r\ndocument.addEventListener('click',function( e ){\r\n    if( e.target && e.target.id === 'cleantalk-modal-overlay' || e.target.id === 'cleantalk-modal-close' ){\r\n        cleantalkModal.close();\r\n    }\r\n});\r\ndocument.addEventListener(\"cleantalkModalContentLoaded\", function( e ) {\r\n    if( cleantalkModal.opened && cleantalkModal.loaded ) {\r\n        document.getElementById( 'cleantalk-modal-content' ).innerHTML = cleantalkModal.loaded;\r\n    }\r\n});"],"names":["cleantalkModal","loaded","loading","opened","opening","load","action","this","callback","result","data","params","obj","document","dispatchEvent","CustomEvent","bubbles","apbct_admin_sendAJAX","apbct_public_sendAJAX","notJson","open","renderCss","cssStr","key","styles","overlayCss","z-index","position","top","left","width","height","background","display","justify-content","align-items","toString","innerCss","padding","border","border-radius","box-shadow","closeCss","cursor","right","closeCssBefore","content","transform","closeCssAfter","bodyCss","overflow","cleantalkModalStyle","createElement","setAttribute","innerHTML","body","append","overlay","classList","add","inner","close","remove","getElementById","addEventListener","e","target","id"],"mappings":"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"}