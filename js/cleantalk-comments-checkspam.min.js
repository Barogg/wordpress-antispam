var ct_working=!(String.prototype.printf=function(){var t=this;for(var e in arguments){var c=t.substring(0,t.indexOf("%s",0)),_=t.substring(t.indexOf("%s",0)+2,t.length);t=c+arguments[e]+_}return t}),ct_new_check=!0,ct_cooling_down_flag=!1,ct_close_animate=!0,ct_accurate_check=!1,ct_pause=!1,ct_prev_accurate=ctCommentsCheck.ct_prev_accurate,ct_prev_from=ctCommentsCheck.ct_prev_from,ct_prev_till=ctCommentsCheck.ct_prev_till,ct_cool_down_time=9e4,ct_requests_counter=0,ct_max_requests=60,ct_ajax_nonce=ctCommentsCheck.ct_ajax_nonce,ct_comments_total=0,ct_comments_checked=0,ct_comments_spam=0,ct_comments_bad=0,ct_unchecked="unset",ct_date_from=0,ct_date_till=0;function animate_comment(t,e){ct_close_animate?.3==t?jQuery("#comment-"+e).fadeTo(200,t,function(){animate_comment(1,e)}):jQuery("#comment-"+e).fadeTo(200,t,function(){animate_comment(.3,e)}):ct_close_animate=!0}function ct_clear_comments(){var t=0,e=0;jQuery("#ct_allow_date_range").is(":checked")&&(t=jQuery("#ct_date_range_from").val(),e=jQuery("#ct_date_range_till").val());var c={action:"ajax_clear_comments",security:ct_ajax_nonce,from:t,till:e};jQuery.ajax({type:"POST",url:ajaxurl,data:c,success:function(t){ct_show_info(),ct_send_comments()}})}function ct_cooling_down_toggle(){ct_cooling_down_flag=!1,ct_send_comments(),ct_show_info()}function ct_send_comments(){if(!0!==ct_cooling_down_flag){if(ct_max_requests<=ct_requests_counter)return setTimeout(ct_cooling_down_toggle,ct_cool_down_time),void(ct_cooling_down_flag=!(ct_requests_counter=0));ct_requests_counter++;var t={action:"ajax_check_comments",security:ct_ajax_nonce,new_check:ct_new_check,unchecked:ct_unchecked};ct_accurate_check&&(t.accurate_check=!0),ct_date_from&&ct_date_till&&(t.from=ct_date_from,t.till=ct_date_till),jQuery.ajax({type:"POST",url:ajaxurl,data:t,success:function(t){if(t=jQuery.parseJSON(t),parseInt(t.error))if(ct_working=!1,confirm(t.error_message+". Do you want to proceed?"))ct_send_comments();else{var e="edit-comments.php?page=ct_check_spam";0!=ct_date_from&&0!=ct_date_till&&(e+="&from="+ct_date_from+"&till="+ct_date_till),location.href=e}else if(ct_new_check=!1,1==parseInt(t.end)||!0===ct_pause){1==parseInt(t.end)&&(document.cookie="ct_paused_comments_check=0; path=/"),ct_working=!1,jQuery("#ct_working_message").hide();e="edit-comments.php?page=ct_check_spam";0!=ct_date_from&&0!=ct_date_till&&(e+="&from="+ct_date_from+"&till="+ct_date_till),location.href=e}else if(0==parseInt(t.end)){ct_comments_checked+=t.checked,ct_comments_spam+=t.spam,ct_comments_bad+=t.bad,ct_unchecked=ct_comments_total-ct_comments_checked-ct_comments_bad;var c=(c=String(ctCommentsCheck.ct_status_string)).printf(ct_comments_total,ct_comments_checked,ct_comments_spam,ct_comments_bad);0<parseInt(ct_comments_spam)&&(c+=ctCommentsCheck.ct_status_string_warning),jQuery("#ct_checking_status").html(c),jQuery("#ct_error_message").hide(),+ct_comments_total<ct_comments_checked+ct_comments_bad&&(document.cookie="ct_comments_start_check=1; path=/",document.cookie="ct_comments_safe_check=1; path=/",location.href="edit-comments.php?page=ct_check_spam"),ct_send_comments()}},error:function(t,e,c){jQuery("#ct_error_message").show(),jQuery("#cleantalk_ajax_error").html(e),jQuery("#cleantalk_js_func").html("Check comments"),setTimeout(ct_send_comments(),3e3)},timeout:25e3})}}function ct_show_info(){if(ct_working){if(1==ct_cooling_down_flag)return jQuery("#ct_cooling_notice").html("Waiting for API to cool down. (About a minute)"),void jQuery("#ct_cooling_notice").show();if(jQuery("#ct_cooling_notice").hide(),setTimeout(ct_show_info,3e3),!ct_comments_total){var t={action:"ajax_info_comments",security:ct_ajax_nonce};ct_date_from&&ct_date_till&&(t.from=ct_date_from,t.till=ct_date_till),jQuery.ajax({type:"POST",url:ajaxurl,data:t,success:function(t){t=jQuery.parseJSON(t),jQuery("#ct_checking_status").html(t.message),ct_comments_total=t.total,ct_comments_spam=t.spam,ct_comments_checked=t.checked,ct_comments_bad=t.bad},error:function(t,e,c){jQuery("#ct_error_message").show(),jQuery("#cleantalk_ajax_error").html(e),jQuery("#cleantalk_js_func").html("Check comments"),setTimeout(ct_show_info(),3e3)},timeout:15e3})}}}function ct_toggle_depended(t,e){e=e||null;var c=jQuery(t.data("depended"));t.data("state")||e?(t.data("state",!1),c.prop("disabled",!0),c.removeProp("checked"),c.data("depended")&&ct_toggle_depended(c,!0)):(t.data("state",!0),c.removeProp("disabled"))}jQuery(document).ready(function(){jQuery("#ct_allow_date_range").data({depended:".ct_date",state:!1}),ct_prev_accurate&&jQuery("#ct_accurate_check").prop("checked",!0),ct_prev_from&&(jQuery("#ct_allow_date_range").prop("checked",!0).data("state",!0),jQuery("#ct_date_range_from").removeProp("disabled").val(ct_prev_from),jQuery("#ct_date_range_till").removeProp("disabled").val(ct_prev_till)),jQuery("#ct_allow_date_range, #ct_accurate_check").on("change",function(){ct_toggle_depended(jQuery(this))}),jQuery.datepicker.setDefaults(jQuery.datepicker.regional.en);var a=jQuery("#ct_date_range_from, #ct_date_range_till").datepicker({dateFormat:"M d yy",maxDate:"+0D",changeMonth:!0,changeYear:!0,showAnim:"slideDown",onSelect:function(t){var e="ct_date_range_from"==this.id?"minDate":"maxDate",c=jQuery(this).data("datepicker"),_=jQuery.datepicker.parseDate(c.settings.dateFormat||jQuery.datepicker._defaults.dateFormat,t,c.settings);a.not(this).datepicker("option",e,_)}});function t(t){t=t||null,jQuery("#ct_allow_date_range").is(":checked")&&(ct_date_from=jQuery("#ct_date_range_from").val(),ct_date_till=jQuery("#ct_date_range_till").val(),""==ct_date_from||""==ct_date_till)?alert("Please, specify a date range."):(jQuery("#ct_accurate_check").is(":checked")&&(ct_accurate_check=!0),jQuery(".ct_to_hide").hide(),jQuery("#ct_working_message").show(),jQuery("#ct_preloader").show(),jQuery("#ct_pause").show(),ct_working=!0,t?(ct_show_info(),ct_send_comments()):ct_clear_comments())}jQuery("#ct_check_spam_button").click(function(){t(!(document.cookie="ct_paused_comments_check=0; path=/"))}),jQuery("#ct_proceed_check_button").click(function(){t(!0)}),jQuery("#ct_pause").on("click",function(){ct_pause=!0;var t={accurate:ct_accurate_check,from:ct_date_from,till:ct_date_till};document.cookie="ct_paused_comments_check="+JSON.stringify(t)+"; path=/"}),"1"===ctCommentsCheck.start&&(document.cookie="ct_comments_start_check=0; expires="+new Date(0).toUTCString()+"; path=/",jQuery("#ct_check_spam_button").click())});
//# sourceMappingURL=cleantalk-comments-checkspam.min.js.map
