{"version":3,"file":"apbct-public--functions.min.js","sources":["apbct-public--functions.js"],"sourcesContent":["function ctSetCookie( cookies, value, expires ){\n\n    if( typeof cookies === 'string' && typeof value === 'string' || typeof value === 'number'){\n        var skip_alt = cookies === 'ct_pointer_data';\n        cookies = [ [ cookies, value, expires ] ];\n    }\n\n    // Cookies disabled\n    if( ctPublicFunctions.data__cookies_type === 'none' ){\n        return;\n\n        // Using traditional cookies\n    }else if( ctPublicFunctions.data__cookies_type === 'native' ){\n        cookies.forEach( function (item, i, arr\t) {\n            var expires = typeof item[2] !== 'undefined' ? \"expires=\" + expires + '; ' : '';\n            var ctSecure = location.protocol === 'https:' ? '; secure' : '';\n            document.cookie = ctPublicFunctions.cookiePrefix + item[0] + \"=\" + encodeURIComponent(item[1]) + \"; \" + expires + \"path=/; samesite=lax\" + ctSecure;\n        });\n\n        // Using alternative cookies\n    }else if( ctPublicFunctions.data__cookies_type === 'alternative' && ! skip_alt ){\n\n        // Using REST API handler\n        if( ctPublicFunctions.data__ajax_type === 'rest' ){\n            apbct_public_sendREST(\n                'alt_sessions',\n                {\n                    method: 'POST',\n                    data: { cookies: cookies }\n                }\n            );\n\n        // Using AJAX request and handler\n        } else if( ctPublicFunctions.data__ajax_type === 'admin_ajax' ) {\n            apbct_public_sendAJAX(\n                {\n                    action: 'apbct_alt_session__save__AJAX',\n                    cookies: cookies,\n                },\n                {\n                    notJson: 1,\n                }\n            );\n        }\n    }\n}\n\nfunction ctDeleteCookie(cookieName) {\n    // Cookies disabled\n    if( ctPublicFunctions.data__cookies_type === 'none' ){\n        return;\n\n    // Using traditional cookies\n    }else if( ctPublicFunctions.data__cookies_type === 'native' ){\n\n        var ctSecure = location.protocol === 'https:' ? '; secure' : '';\n        document.cookie = cookieName + \"=\\\"\\\"; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; samesite=lax\" + ctSecure;\n\n    // Using alternative cookies\n    }else if( ctPublicFunctions.data__cookies_type === 'alternative' ){\n        // @ToDo implement this logic\n    }\n}\n\nfunction apbct_public_sendAJAX(data, params, obj){\n\n    // Default params\n    var callback    = params.callback    || null;\n    var callback_context = params.callback_context || null;\n    var callback_params = params.callback_params || null;\n    var async = params.async || true;\n    var notJson     = params.notJson     || null;\n    var timeout     = params.timeout     || 15000;\n    var obj         = obj                || null;\n    var button      = params.button      || null;\n    var spinner     = params.spinner     || null;\n    var progressbar = params.progressbar || null;\n    var silent      = params.silent      || null;\n    var no_nonce    = params.no_nonce    || null;\n\n    if(typeof (data) === 'string') {\n        if( ! no_nonce )\n            data = data + '&_ajax_nonce=' + ctPublicFunctions._ajax_nonce;\n        data = data + '&no_cache=' + Math.random()\n    } else {\n        if( ! no_nonce )\n            data._ajax_nonce = ctPublicFunctions._ajax_nonce;\n        data.no_cache = Math.random();\n    }\n    // Button and spinner\n    if(button)  {button.setAttribute('disabled', 'disabled'); button.style.cursor = 'not-allowed'; }\n    if(spinner) jQuery(spinner).css('display', 'inline');\n\n    jQuery.ajax({\n        type: \"POST\",\n        url: ctPublicFunctions._ajax_url,\n        data: data,\n        async: async,\n        success: function(result){\n            if(button){  button.removeAttribute('disabled'); button.style.cursor = 'pointer'; }\n            if(spinner)  jQuery(spinner).css('display', 'none');\n            if(!notJson) result = JSON.parse(result);\n            if(result.error){\n                setTimeout(function(){ if(progressbar) progressbar.fadeOut('slow'); }, 1000);\n                console.log('Error happens: ' + (result.error || 'Unkown'));\n            }else{\n                if(callback) {\n                    if (callback_params)\n                        callback.apply( callback_context, callback_params.concat( result, data, params, obj ) );\n                    else\n                        callback(result, data, params, obj);\n                }\n            }\n        },\n        error: function(jqXHR, textStatus, errorThrown){\n            if(button){  button.removeAttribute('disabled'); button.style.cursor = 'pointer'; }\n            if(spinner) jQuery(spinner).css('display', 'none');\n            if( errorThrown && ! silent ) {\n                console.log('APBCT_AJAX_ERROR');\n                console.log(jqXHR);\n                console.log(textStatus);\n                console.log('Anti-spam by Cleantalk plugin error: ' + errorThrown + 'Please, contact Cleantalk tech support https://wordpress.org/support/plugin/cleantalk-spam-protect/');\n            }\n        },\n        timeout: timeout,\n    });\n}\n\nfunction apbct_public_sendREST( route, params ) {\n\n    var callback = params.callback || null;\n    var data     = params.data || [];\n    var method   = params.method || 'POST';\n\n    jQuery.ajax({\n        type: method,\n        url: ctPublicFunctions._rest_url + 'cleantalk-antispam/v1/' + route,\n        data: data,\n        beforeSend : function ( xhr ) {\n            xhr.setRequestHeader( 'X-WP-Nonce', ctPublicFunctions._rest_nonce );\n        },\n        success: function(result){\n            if(result.error){\n                console.log('Error happens: ' + (result.error || 'Unknown'));\n            }else{\n                if(callback) {\n                    var obj = null;\n                    callback(result, route, params, obj);\n                }\n            }\n        },\n        error: function(jqXHR, textStatus, errorThrown){\n            if( errorThrown ) {\n                console.log('APBCT_REST_ERROR');\n                console.log(jqXHR);\n                console.log(textStatus);\n                console.log('Anti-spam by Cleantalk plugin REST API error: ' + errorThrown + ' Please, contact Cleantalk tech support https://wordpress.org/support/plugin/cleantalk-spam-protect/');\n            }\n        },\n    });\n\n}\n\napbctLocalStorage = {\n    get : function(key, property) {\n        if ( typeof property === 'undefined' ) {\n            property = 'value';\n        }\n        const storageValue = localStorage.getItem(key);\n        if ( storageValue !== null ) {\n            try {\n                const json = JSON.parse(storageValue);\n                return json.hasOwnProperty(property) ? JSON.parse(json[property]) : json;\n            } catch (e) {\n                return new Error(e);\n            }\n        }\n        return false;\n    },\n    set : function(key, value) {\n        let objToSave = {'value': JSON.stringify(value), 'timestamp': Math.floor(new Date().getTime() / 1000)};\n        localStorage.setItem(key, JSON.stringify(objToSave));\n    },\n    isAlive : function(key, maxLifetime) {\n        if ( typeof maxLifetime === 'undefined' ) {\n            maxLifetime = 86400;\n        }\n        const keyTimestamp = this.get(key, 'timestamp');\n        return keyTimestamp + maxLifetime > Math.floor(new Date().getTime() / 1000);\n    },\n    isSet : function(key) {\n        return localStorage.getItem(key) !== null;\n    }\n}\n\n(function() {\n\n    var ct_date = new Date(),\n        ctTimeMs = new Date().getTime(),\n        ctMouseEventTimerFlag = true, //Reading interval flag\n        ctMouseData = [],\n        ctMouseDataCounter = 0,\n        ctCheckedEmails = {};\n\n    function apbct_attach_event_handler(elem, event, callback){\n        if(typeof window.addEventListener === \"function\") elem.addEventListener(event, callback);\n        else                                              elem.attachEvent(event, callback);\n    }\n\n    function apbct_remove_event_handler(elem, event, callback){\n        if(typeof window.removeEventListener === \"function\") elem.removeEventListener(event, callback);\n        else                                                 elem.detachEvent(event, callback);\n    }\n\n    //Writing first key press timestamp\n    var ctFunctionFirstKey = function output(event){\n        var KeyTimestamp = Math.floor(new Date().getTime()/1000);\n        ctSetCookie(\"ct_fkp_timestamp\", KeyTimestamp);\n        ctKeyStopStopListening();\n    };\n\n    //Reading interval\n    var ctMouseReadInterval = setInterval(function(){\n        ctMouseEventTimerFlag = true;\n    }, 150);\n\n    //Writting interval\n    var ctMouseWriteDataInterval = setInterval(function(){\n        ctSetCookie(\"ct_pointer_data\", JSON.stringify(ctMouseData));\n    }, 1200);\n\n    //Logging mouse position each 150 ms\n    var ctFunctionMouseMove = function output(event){\n        ctSetMouseMoved();\n        if(ctMouseEventTimerFlag === true){\n\n            ctMouseData.push([\n                Math.round(event.clientY),\n                Math.round(event.clientX),\n                Math.round(new Date().getTime() - ctTimeMs)\n            ]);\n\n            ctMouseDataCounter++;\n            ctMouseEventTimerFlag = false;\n            if(ctMouseDataCounter >= 50){\n                ctMouseStopData();\n            }\n        }\n    };\n\n    //Stop mouse observing function\n    function ctMouseStopData(){\n        apbct_remove_event_handler(window, \"mousemove\", ctFunctionMouseMove);\n        clearInterval(ctMouseReadInterval);\n        clearInterval(ctMouseWriteDataInterval);\n    }\n\n    //Stop key listening function\n    function ctKeyStopStopListening(){\n        apbct_remove_event_handler(window, \"mousedown\", ctFunctionFirstKey);\n        apbct_remove_event_handler(window, \"keydown\", ctFunctionFirstKey);\n    }\n\n    function checkEmail(e) {\n        var current_email = e.target.value;\n        if (current_email && !(current_email in ctCheckedEmails)) {\n            // Using REST API handler\n            if( ctPublicFunctions.data__ajax_type === 'rest' ){\n                apbct_public_sendREST(\n                    'check_email_before_post',\n                    {\n                        method: 'POST',\n                        data: {'email' : current_email},\n                        callback: function (result) {\n                            if (result.result) {\n                                ctCheckedEmails[current_email] = {'result' : result.result, 'timestamp': Date.now() / 1000 |0};\n                                ctSetCookie('ct_checked_emails', JSON.stringify(ctCheckedEmails));\n                            }\n                        },\n                    }\n                );\n                // Using AJAX request and handler\n            } else if( ctPublicFunctions.data__ajax_type === 'admin_ajax' ) {\n                apbct_public_sendAJAX(\n                    {\n                        action: 'apbct_email_check_before_post',\n                        email : current_email,\n                    },\n                    {\n                        callback: function (result) {\n                            if (result.result) {\n                                ctCheckedEmails[current_email] = {'result' : result.result, 'timestamp': Date.now() / 1000 |0};\n                                ctSetCookie('ct_checked_emails', JSON.stringify(ctCheckedEmails));\n                            }\n                        },\n                    }\n                );\n            }\n        }\n    }\n\n    function ctSetPixelImg(pixelUrl) {\n        ctSetCookie('apbct_pixel_url', pixelUrl);\n        if( +ctPublic.pixel__enabled ){\n            if( ! document.getElementById('apbct_pixel') ) {\n                jQuery('body').append( '<img alt=\"Cleantalk Pixel\" id=\"apbct_pixel\" style=\"display: none; left: 99999px;\" src=\"' + pixelUrl + '\">' );\n            }\n        }\n    }\n\n    function ctGetPixelUrl() {\n        // Check if pixel is already in localstorage and is not outdated\n        let local_storage_pixel_url = ctGetPixelUrlLocalstorage();\n        if ( local_storage_pixel_url !== false ) {\n            if ( ctIsOutdatedPixelUrlLocalstorage(local_storage_pixel_url) ) {\n                ctCleaPixelUrlLocalstorage(local_storage_pixel_url)\n            } else {\n                //if so - load pixel from localstorage and draw it skipping AJAX\n                ctSetPixelImg(local_storage_pixel_url);\n                return;\n            }\n        }\n        // Using REST API handler\n        if( ctPublicFunctions.data__ajax_type === 'rest' ){\n            apbct_public_sendREST(\n                'apbct_get_pixel_url',\n                {\n                    method: 'POST',\n                    callback: function (result) {\n                        if (result) {\n                            //set  pixel url to localstorage\n                            if ( ! ctGetPixelUrlLocalstorage() ){\n                                ctSetPixelUrlLocalstorage(result);\n                            }\n                            //then run pixel drawing\n                            ctSetPixelImg(result);\n                        }\n                    },\n                }\n            );\n            // Using AJAX request and handler\n        }else{\n            apbct_public_sendAJAX(\n                {\n                    action: 'apbct_get_pixel_url',\n                },\n                {\n                    notJson: true,\n                    callback: function (result) {\n                        if (result) {\n                            //set  pixel url to localstorage\n                            if ( ! ctGetPixelUrlLocalstorage() ){\n                                ctSetPixelUrlLocalstorage(result);\n                            }\n                            //then run pixel drawing\n                            ctSetPixelImg(result);\n                        }\n                    },\n                }\n            );\n        }\n    }\n\n    function ctSetHasScrolled() {\n        if( ! apbctLocalStorage.isSet('ct_has_scrolled') || ! apbctLocalStorage.get('ct_has_scrolled') ) {\n            ctSetCookie(\"ct_has_scrolled\", 'true');\n            apbctLocalStorage.set('ct_has_scrolled', true);\n        }\n    }\n\n    function ctSetMouseMoved() {\n        if( ! apbctLocalStorage.isSet('ct_mouse_moved') || ! apbctLocalStorage.get('ct_mouse_moved') ) {\n            ctSetCookie(\"ct_mouse_moved\", 'true');\n            apbctLocalStorage.set('ct_mouse_moved', true);\n        }\n    }\n\n    apbct_attach_event_handler(window, \"mousemove\", ctFunctionMouseMove);\n    apbct_attach_event_handler(window, \"mousedown\", ctFunctionFirstKey);\n    apbct_attach_event_handler(window, \"keydown\", ctFunctionFirstKey);\n    apbct_attach_event_handler(window, \"scroll\", ctSetHasScrolled);\n\n    // Ready function\n    function apbct_ready(){\n\n        // Collect scrolling info\n        var initCookies = [\n            [\"ct_ps_timestamp\", Math.floor(new Date().getTime() / 1000)],\n            [\"ct_fkp_timestamp\", \"0\"],\n            [\"ct_pointer_data\", \"0\"],\n            [\"ct_timezone\", ct_date.getTimezoneOffset()/60*(-1) ],\n            [\"ct_screen_info\", apbctGetScreenInfo()],\n            [\"apbct_headless\", navigator.webdriver],\n        ];\n\n        if( ctPublic.data__cookies_type !== 'native' ) {\n            initCookies.push(['apbct_visible_fields', '0']);\n        } else {\n            // Delete all visible fields cookies on load the page\n            var cookiesArray = document.cookie.split(\";\");\n            if( cookiesArray.length !== 0 ) {\n                for ( var i = 0; i < cookiesArray.length; i++ ) {\n                    var currentCookie = cookiesArray[i].trim();\n                    var cookieName = currentCookie.split(\"=\")[0];\n                    if( cookieName.indexOf(\"apbct_visible_fields_\") === 0 ) {\n                        ctDeleteCookie(cookieName);\n                    }\n                }\n            }\n        }\n\n        if( +ctPublic.pixel__setting ){\n            if( +ctPublic.pixel__enabled ){\n                ctGetPixelUrl()\n            } else {\n                initCookies.push(['apbct_pixel_url', ctPublic.pixel__url]);\n            }\n        }\n\n        if ( +ctPublic.data__email_check_before_post) {\n            initCookies.push(['ct_checked_emails', '0']);\n            jQuery(\"input[type = 'email'], #email\").blur(checkEmail);\n        }\n\n        ctSetCookie(initCookies);\n\n        setTimeout(function(){\n\n            for(var i = 0; i < document.forms.length; i++){\n                var form = document.forms[i];\n\n                //Exclusion for forms\n                if (\n                    +ctPublic.data__visible_fields_required === 0 ||\n                    form.method.toString().toLowerCase() === 'get' ||\n                    form.classList.contains('slp_search_form') || //StoreLocatorPlus form\n                    form.parentElement.classList.contains('mec-booking') ||\n                    form.action.toString().indexOf('activehosted.com') !== -1 || // Active Campaign\n                    (form.id && form.id === 'caspioform') || //Caspio Form\n                    (form.classList && form.classList.contains('tinkoffPayRow')) || // TinkoffPayForm\n                    (form.classList && form.classList.contains('give-form')) || // GiveWP\n                    (form.id && form.id === 'ult-forgot-password-form') || //ult forgot password\n                    (form.id && form.id.toString().indexOf('calculatedfields') !== -1) || // CalculatedFieldsForm\n                    (form.id && form.id.toString().indexOf('sac-form') !== -1) || // Simple Ajax Chat\n                    (form.id && form.id.toString().indexOf('cp_tslotsbooking_pform') !== -1) || // WP Time Slots Booking Form\n                    (form.name && form.name.toString().indexOf('cp_tslotsbooking_pform') !== -1)  || // WP Time Slots Booking Form\n                    form.action.toString() === 'https://epayment.epymtservice.com/epay.jhtml' || // Custom form\n                    (form.name && form.name.toString().indexOf('tribe-bar-form') !== -1)  // The Events Calendar\n                ) {\n                    continue;\n                }\n\n                var hiddenInput = document.createElement( 'input' );\n                hiddenInput.setAttribute( 'type', 'hidden' );\n                hiddenInput.setAttribute( 'id', 'apbct_visible_fields_' + i );\n                hiddenInput.setAttribute( 'name', 'apbct_visible_fields');\n                var visibleFieldsToInput = {};\n                visibleFieldsToInput[0] = apbct_collect_visible_fields(form);\n                hiddenInput.value = JSON.stringify(visibleFieldsToInput);\n                form.append( hiddenInput );\n\n                form.onsubmit_prev = form.onsubmit;\n\n                form.ctFormIndex = i;\n                form.onsubmit = function (event) {\n\n                    if ( ctPublic.data__cookies_type !== 'native' && typeof event.target.ctFormIndex !== 'undefined' ) {\n\n                        var visible_fields = {};\n                        visible_fields[0] = apbct_collect_visible_fields(this);\n                        apbct_visible_fields_set_cookie( visible_fields, event.target.ctFormIndex );\n                    }\n\n                    // Call previous submit action\n                    if (event.target.onsubmit_prev instanceof Function) {\n                        setTimeout(function () {\n                            event.target.onsubmit_prev.call(event.target, event);\n                        }, 500);\n                    }\n                };\n            }\n\n        }, 1000);\n\n        // Listen clicks on encoded emails\n        let decodedEmailNodes = document.querySelectorAll(\"[data-original-string]\");\n        if (decodedEmailNodes.length) {\n            for (let i = 0; i < decodedEmailNodes.length; ++i) {\n                if (\n                    decodedEmailNodes[i].parentElement.href ||\n                    decodedEmailNodes[i].parentElement.parentElement.href\n                ) {\n                    // Skip listening click on hyperlinks\n                    continue;\n                }\n                decodedEmailNodes[i].addEventListener('click', function ctFillDecodedEmailHandler(event) {\n                    this.removeEventListener('click', ctFillDecodedEmailHandler);\n                    apbctAjaxEmailDecode(event);\n                });\n            }\n        }\n    }\n    apbct_attach_event_handler(window, \"DOMContentLoaded\", apbct_ready);\n\n}());\n\nfunction apbctAjaxEmailDecode(event){\n    const element = event.target;\n    element.setAttribute('title', ctPublicFunctions.text__wait_for_decoding);\n    element.style.cursor = 'progress';\n    // Using REST API handler\n    if( ctPublicFunctions.data__ajax_type === 'rest' ){\n        apbct_public_sendREST(\n            'apbct_decode_email',\n            {\n                data: {encodedEmail: event.target.dataset.originalString},\n                method: 'POST',\n                callback: function (result) {\n                    if (result.success) {\n                        ctFillDecodedEmail(result.data, event.target);\n                        element.setAttribute('title', '');\n                        element.removeAttribute('style');\n                    }\n                },\n            }\n        );\n        // Using AJAX request and handler\n    }else{\n        apbct_public_sendAJAX(\n            {\n                action: 'apbct_decode_email',\n                encodedEmail: event.target.dataset.originalString\n            },\n            {\n                notJson: true,\n                callback: function (result) {\n                    if (result.success) {\n                        ctFillDecodedEmail(result.data, event.target);\n                        element.setAttribute('title', '');\n                        element.removeAttribute('style');\n                    }\n                },\n            }\n        );\n    }\n}\n\nfunction ctFillDecodedEmail(result, targetElement){\n    targetElement.innerText = result;\n}\n\nfunction apbct_collect_visible_fields( form ) {\n\n    // Get only fields\n    var inputs = [],\n        inputs_visible = '',\n        inputs_visible_count = 0,\n        inputs_invisible = '',\n        inputs_invisible_count = 0,\n        inputs_with_duplicate_names = [];\n\n    for(var key in form.elements){\n        if(!isNaN(+key))\n            inputs[key] = form.elements[key];\n    }\n\n    // Filter fields\n    inputs = inputs.filter(function(elem){\n\n        // Filter already added fields\n        if( inputs_with_duplicate_names.indexOf( elem.getAttribute('name') ) !== -1 ){\n            return false;\n        }\n        // Filter inputs with same names for type == radio\n        if( -1 !== ['radio', 'checkbox'].indexOf( elem.getAttribute(\"type\") )){\n            inputs_with_duplicate_names.push( elem.getAttribute('name') );\n            return false;\n        }\n        return true;\n    });\n\n    // Visible fields\n    inputs.forEach(function(elem, i, elements){\n        // Unnecessary fields\n        if(\n            elem.getAttribute(\"type\")         === \"submit\" || // type == submit\n            elem.getAttribute('name')         === null     ||\n            elem.getAttribute('name')         === 'ct_checkjs'\n        ) {\n            return;\n        }\n        // Invisible fields\n        if(\n            getComputedStyle(elem).display    === \"none\" ||   // hidden\n            getComputedStyle(elem).visibility === \"hidden\" || // hidden\n            getComputedStyle(elem).opacity    === \"0\" ||      // hidden\n            elem.getAttribute(\"type\")         === \"hidden\" // type == hidden\n        ) {\n            if( elem.classList.contains(\"wp-editor-area\") ) {\n                inputs_visible += \" \" + elem.getAttribute(\"name\");\n                inputs_visible_count++;\n            } else {\n                inputs_invisible += \" \" + elem.getAttribute(\"name\");\n                inputs_invisible_count++;\n            }\n        }\n        // Visible fields\n        else {\n            inputs_visible += \" \" + elem.getAttribute(\"name\");\n            inputs_visible_count++;\n        }\n\n    });\n\n    inputs_invisible = inputs_invisible.trim();\n    inputs_visible = inputs_visible.trim();\n\n    return {\n        visible_fields : inputs_visible,\n        visible_fields_count : inputs_visible_count,\n        invisible_fields : inputs_invisible,\n        invisible_fields_count : inputs_invisible_count,\n    }\n\n}\n\nfunction apbct_visible_fields_set_cookie( visible_fields_collection, form_id ) {\n\n    var collection = typeof visible_fields_collection === 'object' && visible_fields_collection !== null ?  visible_fields_collection : {};\n\n    if( ctPublic.data__cookies_type === 'native' ) {\n        for ( var i in collection ) {\n            if ( i > 10 ) {\n                // Do not generate more than 10 cookies\n                return;\n            }\n            var collectionIndex = form_id !== undefined ? form_id : i;\n            ctSetCookie(\"apbct_visible_fields_\" + collectionIndex, JSON.stringify( collection[i] ) );\n        }\n    } else {\n        ctSetCookie(\"apbct_visible_fields\", JSON.stringify( collection ) );\n    }\n}\n\nfunction apbct_js_keys__set_input_value(result, data, params, obj){\n    if( document.querySelectorAll('[name^=ct_checkjs]').length > 0 ) {\n        var elements = document.querySelectorAll('[name^=ct_checkjs]');\n        for ( var i = 0; i < elements.length; i++ ) {\n            elements[i].value = result.js_key;\n        }\n    }\n}\n\nfunction apbctGetScreenInfo() {\n    return JSON.stringify({\n        fullWidth : document.documentElement.scrollWidth,\n        fullHeight : Math.max(\n            document.body.scrollHeight, document.documentElement.scrollHeight,\n            document.body.offsetHeight, document.documentElement.offsetHeight,\n            document.body.clientHeight, document.documentElement.clientHeight\n        ),\n        visibleWidth : document.documentElement.clientWidth,\n        visibleHeight : document.documentElement.clientHeight,\n    });\n}\n\nif(typeof jQuery !== 'undefined') {\n\n    // Capturing responses and output block message for unknown AJAX forms\n    jQuery(document).ajaxComplete(function (event, xhr, settings) {\n        if (xhr.responseText && xhr.responseText.indexOf('\"apbct') !== -1) {\n            var response = JSON.parse(xhr.responseText);\n            if (typeof response.apbct !== 'undefined') {\n                response = response.apbct;\n                if (response.blocked) {\n                    document.dispatchEvent(\n                        new CustomEvent( \"apbctAjaxBockAlert\", {\n                            bubbles: true,\n                            detail: { message: response.comment }\n                        } )\n                    );\n\n                    // Show the result by modal\n                    cleantalkModal.loaded = response.comment;\n                    cleantalkModal.open();\n\n                    if(+response.stop_script == 1)\n                        window.stop();\n                }\n            }\n        }\n    });\n}\n\nfunction ctSetPixelUrlLocalstorage(ajax_pixel_url) {\n    //set pixel to the storage\n    localStorage.setItem('session_pixel_url', ajax_pixel_url)\n    //set pixel timestamp to the storage\n    localStorage.setItem(ajax_pixel_url, Math.floor(Date.now() / 1000).toString())\n}\n\nfunction ctGetPixelUrlLocalstorage() {\n    let local_storage_pixel = localStorage.getItem('session_pixel_url');\n    if ( local_storage_pixel !== null ) {\n        return local_storage_pixel;\n    } else {\n        return false;\n    }\n}\n\nfunction ctIsOutdatedPixelUrlLocalstorage(local_storage_pixel_url) {\n    let local_storage_pixel_timestamp = Number(localStorage.getItem(local_storage_pixel_url));\n    let current_timestamp = Math.floor(Date.now() / 1000).toString()\n    let timestamp_difference = current_timestamp - local_storage_pixel_timestamp;\n    return timestamp_difference > 3600 * 3;\n}\n\nfunction ctCleaPixelUrlLocalstorage(local_storage_pixel_url) {\n    //remove timestamp\n    localStorage.removeItem(local_storage_pixel_url)\n    //remove pixel itself\n    localStorage.removeItem('session_pixel_url')\n}\n\n/* Cleantalk Modal object */\ncleantalkModal = {\n\n    // Flags\n    loaded: false,\n    loading: false,\n    opened: false,\n    opening: false,\n\n    // Methods\n    load: function( action ) {\n        if( ! this.loaded ) {\n            this.loading = true;\n            callback = function( result, data, params, obj ) {\n                cleantalkModal.loading = false;\n                cleantalkModal.loaded = result;\n                document.dispatchEvent(\n                    new CustomEvent( \"cleantalkModalContentLoaded\", {\n                        bubbles: true,\n                    } )\n                );\n            };\n            if( typeof apbct_admin_sendAJAX === \"function\" ) {\n                apbct_admin_sendAJAX( { 'action' : action }, { 'callback': callback, 'notJson': true } );\n            } else {\n                apbct_public_sendAJAX( { 'action' : action }, { 'callback': callback, 'notJson': true } );\n            }\n\n        }\n    },\n\n    open: function () {\n        /* Cleantalk Modal CSS start */\n        var renderCss = function () {\n            var cssStr = '';\n            for ( key in this.styles ) {\n                cssStr += key + ':' + this.styles[key] + ';';\n            }\n            return cssStr;\n        };\n        var overlayCss = {\n            styles: {\n                \"z-index\": \"9999\",\n                \"position\": \"fixed\",\n                \"top\": \"0\",\n                \"left\": \"0\",\n                \"width\": \"100%\",\n                \"height\": \"100%\",\n                \"background\": \"rgba(0,0,0,0.5)\",\n                \"display\": \"flex\",\n                \"justify-content\" : \"center\",\n                \"align-items\" : \"center\",\n            },\n            toString: renderCss\n        };\n        var innerCss = {\n            styles: {\n                \"position\" : \"relative\",\n                \"padding\" : \"30px\",\n                \"background\" : \"#FFF\",\n                \"border\" : \"1px solid rgba(0,0,0,0.75)\",\n                \"border-radius\" : \"4px\",\n                \"box-shadow\" : \"7px 7px 5px 0px rgba(50,50,50,0.75)\",\n            },\n            toString: renderCss\n        };\n        var closeCss = {\n            styles: {\n                \"position\" : \"absolute\",\n                \"background\" : \"#FFF\",\n                \"width\" : \"20px\",\n                \"height\" : \"20px\",\n                \"border\" : \"2px solid rgba(0,0,0,0.75)\",\n                \"border-radius\" : \"15px\",\n                \"cursor\" : \"pointer\",\n                \"top\" : \"-8px\",\n                \"right\" : \"-8px\",\n                \"box-sizing\" : \"content-box\",\n            },\n            toString: renderCss\n        };\n        var closeCssBefore = {\n            styles: {\n                \"content\" : \"\\\"\\\"\",\n                \"display\" : \"block\",\n                \"position\" : \"absolute\",\n                \"background\" : \"#000\",\n                \"border-radius\" : \"1px\",\n                \"width\" : \"2px\",\n                \"height\" : \"16px\",\n                \"top\" : \"2px\",\n                \"left\" : \"9px\",\n                \"transform\" : \"rotate(45deg)\",\n            },\n            toString: renderCss\n        };\n        var closeCssAfter = {\n            styles: {\n                \"content\" : \"\\\"\\\"\",\n                \"display\" : \"block\",\n                \"position\" : \"absolute\",\n                \"background\" : \"#000\",\n                \"border-radius\" : \"1px\",\n                \"width\" : \"2px\",\n                \"height\" : \"16px\",\n                \"top\" : \"2px\",\n                \"left\" : \"9px\",\n                \"transform\" : \"rotate(-45deg)\",\n            },\n            toString: renderCss\n        };\n        var bodyCss = {\n            styles: {\n                \"overflow\" : \"hidden\",\n            },\n            toString: renderCss\n        };\n        var cleantalkModalStyle = document.createElement( 'style' );\n        cleantalkModalStyle.setAttribute( 'id', 'cleantalk-modal-styles' );\n        cleantalkModalStyle.innerHTML = 'body.cleantalk-modal-opened{' + bodyCss + '}';\n        cleantalkModalStyle.innerHTML += '#cleantalk-modal-overlay{' + overlayCss + '}';\n        cleantalkModalStyle.innerHTML += '#cleantalk-modal-close{' + closeCss + '}';\n        cleantalkModalStyle.innerHTML += '#cleantalk-modal-close:before{' + closeCssBefore + '}';\n        cleantalkModalStyle.innerHTML += '#cleantalk-modal-close:after{' + closeCssAfter + '}';\n        document.body.append( cleantalkModalStyle );\n        /* Cleantalk Modal CSS end */\n\n        var overlay = document.createElement( 'div' );\n        overlay.setAttribute( 'id', 'cleantalk-modal-overlay' );\n        document.body.append( overlay );\n\n        document.body.classList.add( 'cleantalk-modal-opened' );\n\n        var inner = document.createElement( 'div' );\n        inner.setAttribute( 'id', 'cleantalk-modal-inner' );\n        inner.setAttribute( 'style', innerCss );\n        overlay.append( inner );\n\n        var close = document.createElement( 'div' );\n        close.setAttribute( 'id', 'cleantalk-modal-close' );\n        inner.append( close );\n\n        var content = document.createElement( 'div' );\n        if ( this.loaded ) {\n            content.innerHTML = this.loaded;\n        } else {\n            content.innerHTML = 'Loading...';\n            // @ToDo Here is hardcoded parameter. Have to get this from a 'data-' attribute.\n            this.load( 'get_options_template' );\n        }\n        content.setAttribute( 'id', 'cleantalk-modal-content' );\n        inner.append( content );\n\n        this.opened = true;\n    },\n\n    close: function () {\n        document.body.classList.remove( 'cleantalk-modal-opened' );\n        document.getElementById( 'cleantalk-modal-overlay' ).remove();\n        document.getElementById( 'cleantalk-modal-styles' ).remove();\n        document.dispatchEvent(\n            new CustomEvent( \"cleantalkModalClosed\", {\n                bubbles: true,\n            } )\n        );\n    }\n\n};\n\n/* Cleantalk Modal helpers */\ndocument.addEventListener('click',function( e ){\n    if( e.target && e.target.id === 'cleantalk-modal-overlay' || e.target.id === 'cleantalk-modal-close' ){\n        cleantalkModal.close();\n    }\n});\ndocument.addEventListener(\"cleantalkModalContentLoaded\", function( e ) {\n    if( cleantalkModal.opened && cleantalkModal.loaded ) {\n        document.getElementById( 'cleantalk-modal-content' ).innerHTML = cleantalkModal.loaded;\n    }\n});"],"names":["ctSetCookie","cookies","value","expires","skip_alt","ctPublicFunctions","data__cookies_type","forEach","item","i","arr","ctSecure","location","protocol","document","cookie","cookiePrefix","encodeURIComponent","data__ajax_type","apbct_public_sendREST","method","data","apbct_public_sendAJAX","action","notJson","ctDeleteCookie","cookieName","params","obj","callback","callback_context","callback_params","async","timeout","button","spinner","progressbar","silent","no_nonce","_ajax_nonce","Math","random","no_cache","setAttribute","style","cursor","jQuery","css","ajax","type","url","_ajax_url","success","result","removeAttribute","JSON","parse","error","setTimeout","fadeOut","console","log","apply","concat","jqXHR","textStatus","errorThrown","route","_rest_url","beforeSend","xhr","setRequestHeader","_rest_nonce","apbctAjaxEmailDecode","event","element","target","text__wait_for_decoding","encodedEmail","dataset","originalString","ctFillDecodedEmail","targetElement","innerText","apbct_collect_visible_fields","form","key","inputs","inputs_visible","inputs_visible_count","inputs_invisible","inputs_invisible_count","inputs_with_duplicate_names","elements","isNaN","filter","elem","indexOf","getAttribute","push","getComputedStyle","display","visibility","opacity","classList","contains","trim","visible_fields","visible_fields_count","invisible_fields","invisible_fields_count","apbct_visible_fields_set_cookie","visible_fields_collection","form_id","collection","ctPublic","undefined","stringify","apbct_js_keys__set_input_value","querySelectorAll","length","js_key","apbctGetScreenInfo","fullWidth","documentElement","scrollWidth","fullHeight","max","body","scrollHeight","offsetHeight","clientHeight","visibleWidth","clientWidth","visibleHeight","ctSetPixelUrlLocalstorage","ajax_pixel_url","localStorage","setItem","floor","Date","now","toString","ctGetPixelUrlLocalstorage","let","local_storage_pixel","getItem","ctIsOutdatedPixelUrlLocalstorage","local_storage_pixel_url","local_storage_pixel_timestamp","Number","ctCleaPixelUrlLocalstorage","removeItem","apbctLocalStorage","get","property","storageValue","json","hasOwnProperty","e","Error","set","objToSave","timestamp","getTime","isAlive","maxLifetime","this","isSet","ct_date","ctTimeMs","ctMouseEventTimerFlag","ctMouseData","ctMouseDataCounter","ctCheckedEmails","apbct_attach_event_handler","window","addEventListener","attachEvent","apbct_remove_event_handler","removeEventListener","detachEvent","ctFunctionFirstKey","ctMouseReadInterval","setInterval","ctMouseWriteDataInterval","ctFunctionMouseMove","round","clientY","clientX","clearInterval","checkEmail","current_email","email","ctSetPixelImg","pixelUrl","pixel__enabled","getElementById","append","initCookies","getTimezoneOffset","navigator","webdriver","cookiesArray","split","pixel__setting","ctGetPixelUrl","pixel__url","data__email_check_before_post","blur","forms","hiddenInput","visibleFieldsToInput","data__visible_fields_required","toLowerCase","parentElement","id","name","createElement","onsubmit_prev","onsubmit","ctFormIndex","Function","call","decodedEmailNodes","href","ctFillDecodedEmailHandler","ajaxComplete","settings","responseText","response","apbct","blocked","dispatchEvent","CustomEvent","bubbles","detail","message","comment","cleantalkModal","loaded","open","stop_script","stop","loading","opened","opening","load","apbct_admin_sendAJAX","renderCss","cssStr","styles","overlayCss","z-index","position","top","left","width","height","background","justify-content","align-items","innerCss","padding","border","border-radius","box-shadow","closeCss","right","box-sizing","closeCssBefore","content","transform","closeCssAfter","bodyCss","overflow","cleantalkModalStyle","overlay","innerHTML","inner","add","close","remove"],"mappings":"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"}